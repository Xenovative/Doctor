<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor-AI香港醫療配對系統</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/favicon/android-chrome-512x512.png">
    <link rel="manifest" href="/assets/favicon/site.webmanifest">
    
    <link rel="stylesheet" href="static/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nasalization&display=swap" rel="stylesheet">
</head>
<body>
    <script>
        // Parallax effect
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const parallax = document.body;
            const speed = scrolled * 0.5;
            parallax.style.setProperty('--scroll', `${speed}px`);
        });
    </script>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="logo-container">
                    <a href="https://doctor-ai.io" target="_blank" class="logo-link">
                        <div class="logo-circle">
                            <img src="/assets/img/doctoricon.png" alt="Doctor AI Logo" class="logo">
                        </div>
                    </a>
                </div>
                <div class="title-container">
                    <h1 class="main-title">Doctor AI.io</h1>
                    <div class="subtitle-container">
                        <h2 class="subtitle" data-translate="subtitle">免費AI病徵分析平台</h2>
                        <div class="mobile-language-toggle">
                            <!-- Language Toggle for Mobile -->
                            <div class="language-toggle">
                                <button class="language-btn" id="languageToggleMobile">
                                    <i class="fas fa-language"></i>
                                    <span id="currentLangMobile">繁</span>
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                                <div class="language-dropdown" id="languageDropdownMobile">
                                    <div class="language-option" data-lang="zh-TW">
                                        <span class="flag">🇭🇰</span>
                                        <span>繁體中文</span>
                                    </div>
                                    <div class="language-option" data-lang="zh-CN">
                                        <span class="flag">🇨🇳</span>
                                        <span>简体中文</span>
                                    </div>
                                    <div class="language-option" data-lang="en">
                                        <span class="flag">🇺🇸</span>
                                        <span>English</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-button-container">
                    <!-- Language Toggle -->
                    <div class="language-toggle">
                        <button class="language-btn" id="languageToggle">
                            <i class="fas fa-language"></i>
                            <span id="currentLang">繁</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="language-dropdown" id="languageDropdown">
                            <div class="language-option" data-lang="zh-TW">
                                <span class="flag">🇭🇰</span>
                                <span>繁體中文</span>
                            </div>
                            <div class="language-option" data-lang="zh-CN">
                                <span class="flag">🇨🇳</span>
                                <span>简体中文</span>
                            </div>
                            <div class="language-option" data-lang="en">
                                <span class="flag">🇺🇸</span>
                                <span>English</span>
                            </div>
                        </div>
                    </div>
                    <a href="https://doctor-ai.io" class="back-to-website-btn" target="_blank">
                        <i class="fas fa-globe"></i>
                        <span data-translate="back_to_website">返回主頁</span>
                    </a>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="form-container">
                <h2><i class="fas fa-user-md"></i> <span data-translate="patient_info">病人資料</span></h2>
                <form id="patientForm">
                    <div class="form-group">
                        <label for="age">
                            <i class="fas fa-birthday-cake"></i>
                            <span data-translate="age">年齡</span>
                            <span class="required-asterisk">*</span>
                        </label>
                        <input type="number" id="age" name="age" min="1" max="120" required>
                    </div>

                    <div class="form-group">
                        <label for="gender">
                            <i class="fas fa-venus-mars"></i>
                            <span data-translate="gender">性別</span>
                            <span class="required-asterisk">*</span>
                        </label>
                        <select id="gender" name="gender" required>
                            <option value="">請選擇性別</option>
                            <option value="男性" data-translate="male">男性</option>
                            <option value="女性" data-translate="female">女性</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="symptoms">
                            <i class="fas fa-stethoscope"></i>
                            <span data-translate="symptoms">症狀描述</span> <span class="required-note" data-translate="symptoms_note">(至少需要3個症狀)</span>
                        </label>
                        <div class="symptom-input-container">
                            <div class="symptom-tags" id="symptomTags"></div>
                            <div class="symptom-input-wrapper">
                                <input type="text" id="symptomInput" data-translate-placeholder="symptom_input_placeholder" placeholder="輸入症狀並按Enter添加..." autocomplete="off">
                                <div class="symptom-suggestions" id="symptomSuggestions"></div>
                            </div>
                        </div>
                        <textarea id="symptoms" name="symptoms" required style="display: none;"></textarea>
                        <div class="input-hint" data-translate="symptoms_hint">選擇或輸入症狀，至少需要3個症狀以便AI準確分析</div>
                    </div>

                    <div class="form-group">
                        <label for="chronic-conditions">
                            <i class="fas fa-heart-pulse"></i>
                            <span data-translate="chronic_conditions">長期病史</span> <span class="optional-note" data-translate="optional">(可選)</span>
                        </label>
                        <div class="chronic-conditions-container">
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="chronic-condition" value="血壓高">
                                    <span class="checkmark"></span>
                                    <span data-translate="high_blood_pressure">血壓高</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="chronic-condition" value="糖尿病">
                                    <span class="checkmark"></span>
                                    <span data-translate="diabetes">糖尿病</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="chronic-condition" value="胆固醇高">
                                    <span class="checkmark"></span>
                                    <span data-translate="high_cholesterol">胆固醇高</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="chronic-condition" value="心臟病">
                                    <span class="checkmark"></span>
                                    <span data-translate="heart_disease">心臟病</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="chronic-condition" value="中風">
                                    <span class="checkmark"></span>
                                    <span data-translate="stroke">中風</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="chronic-condition" value="哮喘">
                                    <span class="checkmark"></span>
                                    <span data-translate="asthma">哮喘</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="chronic-condition" value="慢性肺病">
                                    <span class="checkmark"></span>
                                    <span data-translate="chronic_lung_disease">慢性肺病</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="chronic-condition" value="乙型肝炎">
                                    <span class="checkmark"></span>
                                    <span data-translate="hepatitis_b">乙型肝炎</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="chronic-condition" value="其他" id="other-condition-checkbox">
                                    <span class="checkmark"></span>
                                    <span data-translate="other_conditions">其他長期疾病</span>
                                </label>
                            </div>
                            <div class="other-condition-input" id="other-condition-input" style="display: none;">
                                <input type="text" id="other-condition-text" data-translate-placeholder="other_conditions_placeholder" placeholder="請輸入其他長期疾病">
                            </div>
                        </div>
                        <div class="input-hint" data-translate="chronic_hint">可選擇多項，如無長期病史可不選</div>
                        
                        <!-- 更多資料按鈕 -->
                        <div class="more-info-toggle">
                            <button type="button" id="more-info-btn" class="more-info-button">
                                <i class="fas fa-plus-circle"></i>
                                <span data-translate="more_info">更多資料</span>
                            </button>
                        </div>
                        
                        <!-- 更多資料表單 -->
                        <div id="more-info-section" class="more-info-section" style="display: none;">
                            <div class="more-info-header">
                                <h4><i class="fas fa-clipboard-list"></i> <span data-translate="detailed_health_info">詳細健康資料</span></h4>
                                <p data-translate="detailed_info_desc">以下資料可協助AI更精準地分析您的病情</p>
                            </div>
                            
                            <div class="detailed-info-grid">
                                <div class="form-group">
                                    <label for="height">
                                        <i class="fas fa-ruler-vertical"></i>
                                        <span data-translate="height">身高 (cm)</span>
                                    </label>
                                    <input type="number" id="height" name="height" data-translate-placeholder="height_placeholder" placeholder="例如：170">
                                </div>
                                
                                <div class="form-group">
                                    <label for="weight">
                                        <i class="fas fa-weight"></i>
                                        <span data-translate="weight">體重 (kg)</span>
                                    </label>
                                    <input type="number" id="weight" name="weight" data-translate-placeholder="weight_placeholder" placeholder="例如：65">
                                </div>
                                
                                <div class="form-group full-width">
                                    <label for="medications">
                                        <i class="fas fa-pills"></i>
                                        <span data-translate="medications">有服用任何長期藥物嗎？ 如有，請提供藥物種類名稱。</span>
                                    </label>
                                    <textarea id="medications" name="medications" data-translate-placeholder="medications_placeholder" placeholder="例如：降血壓藥、糖尿病藥物等"></textarea>
                                </div>
                                
                                <div class="form-group full-width">
                                    <label for="allergies">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        <span data-translate="allergies">有食物/藥物敏感嗎？ 如有，請提供</span>
                                    </label>
                                    <textarea id="allergies" name="allergies" data-translate-placeholder="allergies_placeholder" placeholder="例如：花生、盤尼西林等"></textarea>
                                </div>
                                
                                <div class="form-group full-width">
                                    <label for="surgeries">
                                        <i class="fas fa-user-md"></i>
                                        <span data-translate="surgeries">請問客人曾經有冒做過手術？如有，請提供</span>
                                    </label>
                                    <textarea id="surgeries" name="surgeries" data-translate-placeholder="surgeries_placeholder" placeholder="例如：盲腺手術、2020年等"></textarea>
                                </div>
                                
                                <div class="checkbox-group-detailed">
                                    <label class="checkbox-item-detailed">
                                        <input type="checkbox" id="blood-thinner" name="blood-thinner">
                                        <span class="checkmark-detailed"></span>
                                        <span data-translate="blood_thinner">有服薄血藥嗎？</span>
                                    </label>
                                    
                                    <label class="checkbox-item-detailed">
                                        <input type="checkbox" id="recent-visit" name="recent-visit">
                                        <span class="checkmark-detailed"></span>
                                        <span data-translate="recent_visit">三個月內有否就診？</span>
                                    </label>
                                    
                                    <label class="checkbox-item-detailed">
                                        <input type="checkbox" id="cpap-machine" name="cpap-machine">
                                        <span class="checkmark-detailed"></span>
                                        <span data-translate="cpap_machine">睡覺時需要用呼吸機嗎？</span>
                                    </label>
                                    
                                    <label class="checkbox-item-detailed">
                                        <input type="checkbox" id="loose-teeth" name="loose-teeth">
                                        <span class="checkmark-detailed"></span>
                                        <span data-translate="loose_teeth">有沒有已知，但未處理嘉鬆牙？</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="language">
                            <i class="fas fa-language"></i>
                            <span data-translate="preferred_language">偏好語言</span>
                            <span class="required-asterisk">*</span>
                        </label>
                        <select id="language" name="language" required>
                            <option value="" data-translate="select_language">請選擇語言</option>
                            <option value="廣東話" data-translate="cantonese">廣東話</option>
                            <option value="英語" data-translate="english">英語</option>
                            <option value="普通話" data-translate="mandarin">普通話</option>
                            <option value="法語" data-translate="french">法語</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="region">
                            <i class="fas fa-map-marker-alt"></i>
                            <span data-translate="location">所在地區</span>
                            <span class="required-asterisk">*</span>
                        </label>
                        <div class="location-cascade">
                            <select id="region" name="region" required>
                                <option value="" data-translate="select_region">請選擇大區</option>
                                <option value="香港島" data-translate="香港島">香港島</option>
                                <option value="九龍" data-translate="九龍">九龍</option>
                                <option value="新界" data-translate="新界">新界</option>
                            </select>
                            
                            <select id="district" name="district" required style="display: none;">
                                <option value="" data-translate="select_district">請選擇地區</option>
                            </select>
                            
                            <select id="area" name="area" style="display: none;">
                                <option value="" data-translate="select_area">請選擇具體位置 (可選)</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn">
                        <i class="fas fa-search"></i>
                        <span data-translate="find_doctor">尋找合適醫生</span>
                    </button>
                </form>
            </div>

            <div class="loading" id="loading" style="display: none;">
                <div class="spinner"></div>
                <p data-translate="loading_message">AI正在分析您的症狀並配對合適的醫生...</p>
            </div>

            <div class="results-container" id="results" style="display: none;">
                <h2><i class="fas fa-user-doctor"></i> <span data-translate="recommended_doctors">推薦醫生</span></h2>
                <div id="doctorList"></div>
            </div>
        </main>
    </div>
    
    <!-- Bug Report Button -->
    <button id="bugReportBtn" class="bug-report-btn" title="Report a Bug">
        <i class="fas fa-bug"></i>
    </button>
    
    <!-- Bug Report Modal -->
    <div id="bugReportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-bug"></i> <span data-translate="bug_report_title">回報問題</span></h3>
                <span class="close" id="closeBugModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="bugReportForm">
                    <div class="form-group">
                        <label for="bugDescription">
                            <i class="fas fa-comment-dots"></i>
                            <span data-translate="bug_description">問題描述</span>
                            <span class="required-asterisk">*</span>
                        </label>
                        <textarea id="bugDescription" name="bugDescription" rows="5" 
                                data-translate-placeholder="bug_description_placeholder" 
                                placeholder="請詳細描述您遇到的問題..." required></textarea>
                        <div class="input-hint" data-translate="bug_hint">請盡量詳細描述問題，以便我們更好地協助您</div>
                    </div>
                    <div class="form-group">
                        <label for="contactInfo">
                            <i class="fas fa-envelope"></i>
                            <span data-translate="contact_info">聯絡方式</span>
                            <span class="optional-note" data-translate="optional">(可選)</span>
                        </label>
                        <input type="text" id="contactInfo" name="contactInfo" 
                               data-translate-placeholder="contact_info_placeholder" 
                               placeholder="電郵或電話號碼 (如需回覆)">
                    </div>
                    <div class="form-group">
                        <label for="bugImage">
                            <i class="fas fa-image"></i>
                            <span data-translate="bug_image">附加圖片</span>
                            <span class="optional-note" data-translate="optional">(可選)</span>
                        </label>
                        <input type="file" id="bugImage" name="bugImage" accept="image/*" class="file-input">
                        <div class="file-input-hint" data-translate="image_hint">支援 JPG, PNG, GIF 格式，最大 5MB</div>
                        <div id="imagePreview" class="image-preview" style="display: none;">
                            <img id="previewImg" src="" alt="預覽圖片">
                            <button type="button" id="removeImage" class="remove-image-btn">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancelBugReport" data-translate="cancel">取消</button>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            <span data-translate="send_report">發送回報</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Severe Symptoms Warning Modal -->
    <div id="severeWarningModal" class="modal">
        <div class="modal-content severe-warning">
            <div class="modal-header severe-header">
                <h3 id="severeWarningTitle">⚠️ 重要醫療警告</h3>
                <span class="close" id="closeSevereModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="warning-content">
                    <p id="severeWarningMessage" class="warning-message">
                        根據您提供的症狀和病史，以下是重要提醒：
                    </p>
                    
                    <ul id="severeRecommendations" class="recommendations-list">
                        <li>🚨 考慮前往最近的急診室或醫院</li>
                        <li>📞 可撥打999緊急服務熱線</li>
                        <li>🏥 建議尋求專業醫療人員的協助</li>
                        <li>⏰ 如症狀嚴重，請勿延遲就醫</li>
                    </ul>
                    
                    <div class="severe-items" id="severeItemsContainer" style="display: none;">
                        <h4>檢測到的嚴重項目：</h4>
                        <div id="severeSymptoms" class="severe-list"></div>
                        <div id="severeConditions" class="severe-list"></div>
                    </div>
                    
                    <div class="disclaimer">
                        <p id="severeDisclaimer">
                            此系統僅供參考，不構成醫療建議或診斷。對於嚴重或緊急的醫療狀況，請諮詢專業醫療人員。
                        </p>
                    </div>
                </div>
                
                <div class="modal-actions severe-actions">
                    <button type="button" class="btn-emergency" id="callEmergency">
                        <i class="fas fa-phone"></i>
                        撥打999急救
                    </button>
                    <button type="button" class="btn-secondary" id="cancelDiagnosis">
                        <i class="fas fa-times"></i>
                        取消症狀分析
                    </button>
                    <button type="button" class="btn-warning" id="proceedAnyway">
                        <i class="fas fa-exclamation-triangle"></i>
                        我了解風險，繼續症狀分析
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AI Disclaimer Modal -->
    <div id="aiDisclaimerModal" class="modal disclaimer-modal">
        <div class="modal-content disclaimer-content">
            <div class="modal-header disclaimer-header">
                <h3 id="disclaimerTitle">
                    <i class="fas fa-robot"></i>
                    <span data-translate="ai_disclaimer_title">AI醫療配對系統聲明</span>
                </h3>
            </div>
            <div class="modal-body disclaimer-body">
                <div class="disclaimer-content-wrapper">
                    <div class="disclaimer-section">
                        <div class="disclaimer-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="disclaimer-text">
                            <h4 data-translate="not_medical_advice_title">⚠️ 非醫療建議</h4>
                            <p data-translate="not_medical_advice_desc">
                                本系統僅為AI輔助工具，提供的資訊和建議<strong>不構成專業醫療建議、診斷或治療</strong>。
                                所有醫療決定應諮詢合格的醫療專業人員。
                            </p>
                        </div>
                    </div>
                    
                    <div class="disclaimer-section">
                        <div class="disclaimer-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="disclaimer-text">
                            <h4 data-translate="ai_limitations_title">🤖 AI系統限制</h4>
                            <p data-translate="ai_limitations_desc">
                                AI分析基於您提供的症狀描述，可能存在誤差或遺漏。
                                系統無法替代醫生的專業判斷和實際檢查。
                            </p>
                        </div>
                    </div>
                    
                    <div class="disclaimer-section">
                        <div class="disclaimer-icon">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <div class="disclaimer-text">
                            <h4 data-translate="doctor_matching_title">👨‍⚕️ 醫生配對服務</h4>
                            <p data-translate="doctor_matching_desc">
                                本系統協助您找到合適的醫療專業人員，但最終的醫療服務質量
                                取決於個別醫生和診所。我們不對醫療結果承擔責任。
                            </p>
                        </div>
                    </div>
                    
                    <div class="disclaimer-section emergency-notice">
                        <div class="disclaimer-icon emergency-icon">
                            <i class="fas fa-ambulance"></i>
                        </div>
                        <div class="disclaimer-text">
                            <h4 data-translate="emergency_notice_title">🚨 緊急情況</h4>
                            <p data-translate="emergency_notice_desc">
                                如遇緊急醫療情況，請立即撥打<strong>999</strong>或前往最近的急診室，
                                切勿依賴本系統進行緊急醫療決定。
                            </p>
                        </div>
                    </div>
                    
                    <div class="disclaimer-footer">
                        <p data-translate="disclaimer_agreement">
                            繼續使用本系統即表示您已理解並同意以上聲明。
                        </p>
                    </div>
                </div>
                
                <div class="modal-actions disclaimer-actions">
                    <button type="button" class="btn-primary disclaimer-accept" id="acceptDisclaimer">
                        <i class="fas fa-check"></i>
                        <span data-translate="understand_continue">我已理解，繼續使用</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="footer">
        
        <div class="footer-bottom">
            <div class="legal-links">
                <a href="https://www.doctor-ai.io/terms-and-conditions" data-translate="terms_conditions">條款及細則</a>
                <span class="separator">|</span>
                <a href="https://www.doctor-ai.io/privacy-policy" data-translate="privacy_policy">隱私權政策</a>
                <span class="separator">|</span>
                <a href="https://www.doctor-ai.io/accessibility-statement" data-translate="accessibility">無障礙聲明</a>
            </div>
            <p data-translate="copyright"> 2025 XENOVATIVE Limited. 版權所有</p>
        </div>
    </footer>
    
    <script src="static/language.js"></script>
    <script src="static/symptom-input.js"></script>
    <script src="static/form-validation.js"></script>
    <script src="static/severe-warning.js"></script>
    <script src="static/ai-disclaimer.js"></script>
    <script src="static/script.js"></script>
    <script src="static/bug-report.js"></script>
</body>
</html>
